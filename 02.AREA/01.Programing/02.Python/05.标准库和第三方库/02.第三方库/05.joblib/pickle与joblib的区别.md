---
created: 2024-08-01 15:02
updated: 2025-06-10 09:54
dg-publish: true
---

> [!TLDR]
> 写入和读取文件的时候，joblib直接load后者dump更方便一些，推荐joblib



joblib和pickle是两个用于Python对象序列化和反序列化的库，但它们在处理特定类型的数据时有一些差异和优化。以下是它们的主要区别：

  

**1. 专门优化:**

• **joblib**：特别优化用于存储大数据，特别是包含大量numpy数组的数据结构。它能够更有效地处理numpy数组，因为它直接在numpy数组上使用了其自身的压缩算法，这使得它在处理科学计算数据时更为高效。
• **pickle**：一个通用的序列化方法，适用于几乎所有的Python对象类型，但在处理大型数据集（特别是大型numpy数组）时可能不如joblib高效。

**2. 压缩:**

• **joblib**：默认提供压缩功能，这使得它在保存大型数据集时更加高效，占用的磁盘空间更少。
• **pickle**：在标准的使用中不提供压缩功能，尽管可以通过其他方式（如gzip）手动实现数据压缩。

**3. 适用场景:**

• **joblib**：由于其对numpy数组的优化处理，它非常适合在机器学习数据预处理和模型保存中使用。许多机器学习框架（如scikit-learn）推荐使用joblib来保存和加载模型。
• **pickle**：更适合通用目的的Python对象序列化，可以序列化各种类型的Python对象，包括用户自定义的类。

**4. 兼容性:**

• **joblib**：对numpy数组有优化，但对非numpy数据的处理可能不如pickle灵活。
• **pickle**：由于其广泛的应用，具有很好的向后兼容性，可以处理包括自定义对象在内的各种数据类型。

**5. 安全性:**

• **pickle**和**joblib**都存在安全风险，因为它们允许执行任意代码。因此，应避免从不信任的来源加载序列化数据。尽管如此，它们在处理可信数据时是安全的。

总的来说，如果你的应用主要涉及到大规模的numpy数组或机器学习模型，建议使用joblib。对于其他类型的数据或当需要一个通用的序列化解决方案时，可以使用pickle。



**相互兼容性**

• **从****joblib****到****pickle**：joblib保存的文件通常可以通过pickle库来加载，因为joblib实际上是建立在pickle的基础上，并进行了扩展和优化。joblib在保存数据时，如果使用了特定的压缩技术，pickle可能需要相应的处理才能正确读取。

• **从****pickle****到****joblib**：使用pickle保存的数据也可以用joblib来加载，因为joblib向下兼容pickle。由于joblib专门优化了对numpy数组的处理，它在加载由pickle保存的包含大量numpy数据的文件时可能表现得更高效。

  

**注意事项**

• **数据完整性**：使用不同的库加载和保存数据可能会引发关于数据完整性和精确还原数据状态的问题。这通常取决于数据结构的复杂性以及序列化过程中是否使用了特定的优化或压缩技术。
• **性能考虑**：尽管两个库可以互相操作，但使用专为某种数据类型或用途优化的库可能会获得更好的性能。
• **安全性**：无论使用哪个库，从不信任的来源加载序列化数据都存在安全风险。在反序列化时，任何可执行的代码都可以构成潜在的安全威胁。

  

**最佳实践**

• **保持一致**：如果可能的话，尽量在一个项目或系统中保持序列化和反序列化库的一致性。这有助于避免兼容性问题并确保数据处理的一致性。
• **测试和验证**：在切换库或尝试互操作性时，应彻底测试和验证数据的加载和保存功能，确保数据的完整性和应用的稳定性没有受到影响。

  

总的来说，虽然joblib和pickle在某种程度上可以互换使用，但最好是根据具体需求选择最适合的工具，并在更换工具时进行充分的测试。


