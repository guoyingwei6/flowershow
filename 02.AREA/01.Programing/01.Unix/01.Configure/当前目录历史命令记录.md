---
created: 2025-01-08 15:53
updated: 2025-06-10 09:55
dg-publish: true
tags:
  - garden/ğŸŒ±Seedling
---


ä¸‹é¢å‘½ä»¤æ·»åŠ åˆ°~/.bashrcæ–‡ä»¶ä¸­ï¼š
```shell
# save commands
export HISTTIMEFORMAT='%Y-%m-%d %H:%M:%S '
export HISTIGNORE="ls:l:les*:cd*:pwd:exit:clear"
export PROMPT_COMMAND='history -a; history -w; history -c; history -r'
export HISTTIMEFORMAT='%Y-%m-%d %H:%M:%S '
function set_histfile_per_directory {
    local dir_histfile="$PWD/.bash_history"
    export HISTFILE="$dir_histfile"
    if [ ! -e "$HISTFILE" ]; then
        touch "$HISTFILE"
        chmod 600 "$HISTFILE"
    fi
    history -a       # è¿½åŠ å†å²è®°å½•åˆ°æ–‡ä»¶
    history -c       # æ¸…é™¤å½“å‰å†…å­˜ä¸­çš„å†å²è®°å½•
    history -r       # é‡æ–°åŠ è½½å†å²è®°å½•æ–‡ä»¶
}
PROMPT_COMMAND="set_histfile_per_directory; $PROMPT_COMMAND"
```

