---
created: 2024-06-04 20:58
updated: 2025-06-10 09:55
dg-publish: true
tags:
  - garden/ğŸŒ±Seedling
---

åœ¨Linuxç³»ç»Ÿä¸­ï¼Œ`/etc/shadow`Â æ–‡ä»¶æ˜¯å­˜å‚¨ç”¨æˆ·å¯†ç å“ˆå¸ŒåŠç›¸å…³å®‰å…¨ä¿¡æ¯çš„å…³é”®æ–‡ä»¶ï¼Œæ¯”ä¼ ç»Ÿçš„Â `/etc/passwd`Â æ›´å®‰å…¨ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£é‡Šï¼š

---

### **1. æ–‡ä»¶ç»“æ„**

æ¯è¡Œå¯¹åº”ä¸€ä¸ªç”¨æˆ·è´¦æˆ·ï¼Œæ ¼å¼ä¸ºï¼ˆç”¨Â `:`Â åˆ†éš”çš„9ä¸ªå­—æ®µï¼‰ï¼š

```
username:password_hash:last_changed:min_age:max_age:warn:inactive:expire:reserved
```

ç¤ºä¾‹ï¼š

```
alice:$6$salt$hashed_password:18627:0:99999:7:::
```

---

### **2. å­—æ®µè¯¦è§£**

|å­—æ®µ|è¯´æ˜|ç¤ºä¾‹å€¼å«ä¹‰|
|---|---|---|
|**username**|ç”¨æˆ·å|`alice`|
|**password_hash**|å¯†ç å“ˆå¸Œå€¼|`$6$salt$hashed_password`|
|**last_changed**|ä¸Šæ¬¡ä¿®æ”¹å¯†ç çš„å¤©æ•°ï¼ˆä»1970-1-1èµ·ï¼‰|`18627`ï¼ˆ2021å¹´1æœˆ1æ—¥ï¼‰|
|**min_age**|å¯†ç æœ€çŸ­ä½¿ç”¨å¤©æ•°ï¼ˆ0=å¯éšæ—¶ä¿®æ”¹ï¼‰|`0`|
|**max_age**|å¯†ç æœ€é•¿æœ‰æ•ˆæœŸï¼ˆ99999=æ°¸ä¸è¿‡æœŸï¼‰|`99999`|
|**warn**|å¯†ç åˆ°æœŸå‰è­¦å‘Šå¤©æ•°|`7`ï¼ˆæå‰7å¤©è­¦å‘Šï¼‰|
|**inactive**|å¯†ç è¿‡æœŸåå®½é™å¤©æ•°|ç©º=ç«‹å³å¤±æ•ˆ|
|**expire**|è´¦æˆ·ç»å¯¹è¿‡æœŸæ—¥æœŸï¼ˆ1970-1-1èµ·ï¼‰|ç©º=æ°¸ä¸è¿‡æœŸ|
|**reserved**|ä¿ç•™å­—æ®µ|æœªä½¿ç”¨|

---

### **3. å¯†ç å“ˆå¸Œæ ¼å¼**

å¸¸è§æ ¼å¼ï¼ˆä»¥Â `$`Â åˆ†éš”ï¼‰ï¼š

```
$id$salt$hashed_password
```

- **`id`**Â ç®—æ³•æ ‡è¯†ï¼š
    - `1`Â = MD5
    - `5`Â = SHA-256
    - `6`Â = SHA-512ï¼ˆæœ€å®‰å…¨ï¼‰

---

### **4. å®‰å…¨ç‰¹æ€§**

- **ä»…rootå¯è¯»**ï¼šé˜²æ­¢æ™®é€šç”¨æˆ·è·å–å“ˆå¸Œå€¼è¿›è¡Œç ´è§£ã€‚
- **å¯†ç é”å®š**ï¼šç”¨Â `!`Â æˆ–Â `*`Â å¼€å¤´è¡¨ç¤ºè´¦æˆ·è¢«é”å®šï¼ˆå¦‚Â `!$6$...`ï¼‰ã€‚
- **ç©ºå¯†ç **ï¼šå­—æ®µä¸ºÂ `!!`Â æˆ–Â `*`Â æ—¶ç¦æ­¢ç™»å½•ã€‚

---

### **5. ç›¸å…³å‘½ä»¤**

```bash
# ä¿®æ”¹å¯†ç ï¼ˆä¼šæ›´æ–°shadowæ–‡ä»¶ï¼‰
sudo passwd username

# æŸ¥çœ‹ç”¨æˆ·å¯†ç çŠ¶æ€
sudo chage -l username
```